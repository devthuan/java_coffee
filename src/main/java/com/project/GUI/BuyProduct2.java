/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package com.project.GUI;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.SpinnerNumberModel;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import com.project.DAO.CartDAO;
import com.project.DAO.ProductDAO;
import com.project.DTO.CartDTO;
import com.project.DTO.ProductDTO;

public class BuyProduct2 extends javax.swing.JPanel {

    /**
     * Creates new form BuyProduct2
     */
    public BuyProduct2() {
        initComponents();

        ArrayList<CartDTO> list_cart = CartDAO.getCartByAccountId(1);

        for (CartDTO cart : list_cart) {
            componentItemCart(cart);

        }

    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jEditorPane1 = new javax.swing.JEditorPane();
        BuyProductLeft = new javax.swing.JPanel();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        CoffeeContent = new javax.swing.JPanel();
        Item1 = new javax.swing.JPanel();
        ImageBtn1 = new javax.swing.JButton();
        nameItem = new javax.swing.JLabel();
        priceItem = new javax.swing.JLabel();
        btnItem = new javax.swing.JButton();
        Item2 = new javax.swing.JPanel();
        jButton11 = new javax.swing.JButton();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jButton12 = new javax.swing.JButton();
        Item3 = new javax.swing.JPanel();
        jButton13 = new javax.swing.JButton();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jButton14 = new javax.swing.JButton();
        Item4 = new javax.swing.JPanel();
        jButton15 = new javax.swing.JButton();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jButton16 = new javax.swing.JButton();
        Item5 = new javax.swing.JPanel();
        jButton17 = new javax.swing.JButton();
        jLabel15 = new javax.swing.JLabel();
        jLabel16 = new javax.swing.JLabel();
        jButton18 = new javax.swing.JButton();
        MilkTeaContent1 = new javax.swing.JPanel();
        Item6 = new javax.swing.JPanel();
        ImageBtn2 = new javax.swing.JButton();
        nameItem1 = new javax.swing.JLabel();
        priceItem1 = new javax.swing.JLabel();
        btnItem1 = new javax.swing.JButton();
        Item7 = new javax.swing.JPanel();
        jButton19 = new javax.swing.JButton();
        jLabel17 = new javax.swing.JLabel();
        jLabel18 = new javax.swing.JLabel();
        jButton20 = new javax.swing.JButton();
        Item8 = new javax.swing.JPanel();
        jButton21 = new javax.swing.JButton();
        jLabel21 = new javax.swing.JLabel();
        jLabel22 = new javax.swing.JLabel();
        jButton22 = new javax.swing.JButton();
        Item9 = new javax.swing.JPanel();
        jButton23 = new javax.swing.JButton();
        jLabel23 = new javax.swing.JLabel();
        jLabel24 = new javax.swing.JLabel();
        jButton24 = new javax.swing.JButton();
        Item10 = new javax.swing.JPanel();
        jButton25 = new javax.swing.JButton();
        jLabel25 = new javax.swing.JLabel();
        jLabel26 = new javax.swing.JLabel();
        jButton26 = new javax.swing.JButton();
        BuyProductRight = new javax.swing.JPanel();
        totalPayment = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        boxBtn = new javax.swing.JPanel();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();
        CartContainer = new javax.swing.JScrollPane();
        CartContent = new javax.swing.JPanel();
        ItemCart = new javax.swing.JPanel();
        nameProduct = new javax.swing.JLabel();
        price = new javax.swing.JLabel();
        quantity = new javax.swing.JSpinner();
        remove = new javax.swing.JButton();

        jScrollPane1.setViewportView(jEditorPane1);

        setMinimumSize(new java.awt.Dimension(1085, 768));
        setPreferredSize(new java.awt.Dimension(1085, 768));

        BuyProductLeft.setBackground(new java.awt.Color(255, 255, 255));
        BuyProductLeft.setMinimumSize(new java.awt.Dimension(650, 768));
        BuyProductLeft.setPreferredSize(new java.awt.Dimension(650, 768));

        jTabbedPane1.setBackground(new java.awt.Color(255, 255, 255));
        jTabbedPane1.setToolTipText("");
        jTabbedPane1.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        jTabbedPane1.setMinimumSize(new java.awt.Dimension(650, 768));
        jTabbedPane1.setPreferredSize(new java.awt.Dimension(650, 768));
        jTabbedPane1.setRequestFocusEnabled(false);

        CoffeeContent.setBackground(new java.awt.Color(248, 249, 250));
        CoffeeContent.setMinimumSize(new java.awt.Dimension(571, 768));
        java.awt.FlowLayout flowLayout1 = new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 25, 20);
        flowLayout1.setAlignOnBaseline(true);
        CoffeeContent.setLayout(flowLayout1);

        MilkTeaContent1.setBackground(new java.awt.Color(248, 249, 250));
        MilkTeaContent1.setMinimumSize(new java.awt.Dimension(571, 768));
        java.awt.FlowLayout flowLayout3 = new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 25, 20);
        flowLayout3.setAlignOnBaseline(true);
        MilkTeaContent1.setLayout(flowLayout3);

        // render menu Coffee
        ArrayList<ProductDTO> list_product = ProductDAO.get_all_product();
        for (ProductDTO product : list_product) {

            JPanel boxItem = new JPanel();

            // Kiểm tra xem mỗi thành phần có tồn tại không
            if (boxItem != null) {
                boxItem.setBackground(new java.awt.Color(255, 255, 255));
                boxItem.setMinimumSize(new java.awt.Dimension(180, 250));
                boxItem.setPreferredSize(new java.awt.Dimension(180, 250));

                // Thiết lập hình ảnh cho nút ImageBtn (cần phải kiểm tra nếu ImageBtn đã được
                // khai báo và khởi tạo)
                JButton ImageBtn = new JButton(); // Tạo mới JButton cho mỗi item
                ImageBtn.setIcon(new javax.swing.ImageIcon(product.getUrl_image()));
                ImageBtn.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

                // Thiết lập font và text cho nameItem, priceItem, và btnItem (cần phải kiểm tra
                // xem các thành phần này đã được khai báo và khởi tạo)
                JLabel nameItem = new JLabel(); // Tạo mới JLabel cho mỗi item
                priceItem = new JLabel(); // Tạo mới JLabel cho mỗi item
                JButton btnChoose = new JButton(); // Tạo mới JButton cho mỗi item
                nameItem.setFont(new java.awt.Font("Arial", 0, 18));
                nameItem.setText(product.getProduct_name());
                priceItem.setFont(new java.awt.Font("Arial", 0, 14));
                priceItem.setText(String.valueOf(product.getPrice()));
                btnChoose.setFont(new java.awt.Font("Arial", 0, 14));
                btnChoose.setText("Chọn sản phẩm");
                btnChoose.setBorder(javax.swing.BorderFactory.createEmptyBorder(1, 1, 1, 1));

                // Thiết lập GroupLayout cho mỗi JPanel trong mảng list_item
                javax.swing.GroupLayout ItemLayout = new javax.swing.GroupLayout(boxItem);
                boxItem.setLayout(ItemLayout);
                ItemLayout.setHorizontalGroup(
                        ItemLayout.createParallelGroup(
                                javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(ItemLayout.createSequentialGroup()
                                        .addGroup(ItemLayout
                                                .createParallelGroup(
                                                        javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(ItemLayout
                                                        .createSequentialGroup()
                                                        .addGap(57, 57, 57)
                                                        .addComponent(ImageBtn))
                                                .addGroup(ItemLayout
                                                        .createSequentialGroup()
                                                        .addGap(15, 15, 15)
                                                        .addGroup(ItemLayout
                                                                .createParallelGroup(
                                                                        javax.swing.GroupLayout.Alignment.LEADING)
                                                                .addComponent(priceItem,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                        76,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addComponent(nameItem,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                        93,
                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addGroup(ItemLayout
                                                                        .createSequentialGroup()
                                                                        .addGap(6, 6, 6)
                                                                        .addComponent(btnChoose,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                138,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)))))
                                        .addContainerGap(21,
                                                Short.MAX_VALUE)));
                ItemLayout.setVerticalGroup(
                        ItemLayout.createParallelGroup(
                                javax.swing.GroupLayout.Alignment.LEADING)
                                .addGroup(ItemLayout.createSequentialGroup()
                                        .addComponent(ImageBtn,
                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                127,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(
                                                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(nameItem,
                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                22,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addPreferredGap(
                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addComponent(priceItem)
                                        .addPreferredGap(
                                                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(btnChoose,
                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                42,
                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(12, 12, 12)));

                // Thêm JPanel vào CoffeeContent (cần phải kiểm tra xem CoffeeContent đã được
                // khai báo và khởi tạo)
                if (CoffeeContent != null) {
                    if (product.getCategory().equals("Coffee")) {
                        CoffeeContent.add(boxItem);

                    } else if (product.getCategory().equals("Tea")) {
                        MilkTeaContent1.add(boxItem);

                    }
                }
                btnChoose.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        // list_cart.add(new CartDTO(1, product.getId(), 1));
                        CartDAO.insertCart(new CartDTO(1, product.getId(), 1));
                        CartContent.removeAll();
                        ArrayList<CartDTO> list_cart = CartDAO.getCartByAccountId(1);

                        for (CartDTO cart : list_cart) {
                            componentItemCart(cart);

                        }

                        updateTotalMoney();
                        // Refresh the UI to reflect the changes
                        CartContent.revalidate();
                        CartContent.repaint();

                    }
                });

            }

        }

        jTabbedPane1.addTab("Cà phê", CoffeeContent);
        jTabbedPane1.addTab("Trà sữa", MilkTeaContent1);

        javax.swing.GroupLayout BuyProductLeftLayout = new javax.swing.GroupLayout(BuyProductLeft);
        BuyProductLeft.setLayout(BuyProductLeftLayout);
        BuyProductLeftLayout.setHorizontalGroup(
                BuyProductLeftLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jTabbedPane1, javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE));
        BuyProductLeftLayout.setVerticalGroup(
                BuyProductLeftLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(BuyProductLeftLayout.createSequentialGroup()
                                .addComponent(jTabbedPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 768,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(0, 0, Short.MAX_VALUE)));

        BuyProductRight.setBackground(new java.awt.Color(255, 255, 255));
        BuyProductRight.setMinimumSize(new java.awt.Dimension(430, 768));
        BuyProductRight.setPreferredSize(new java.awt.Dimension(430, 768));

        jLabel5.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
        jLabel5.setText("Thành tiền:");

        jLabel6.setFont(new java.awt.Font("Arial", 0, 24)); // NOI18N
        jLabel6.setText("1000000000");

        javax.swing.GroupLayout totalPaymentLayout = new javax.swing.GroupLayout(totalPayment);
        totalPayment.setLayout(totalPaymentLayout);
        totalPaymentLayout.setHorizontalGroup(
                totalPaymentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(totalPaymentLayout.createSequentialGroup()
                                .addContainerGap()
                                .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 130,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 199,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
        totalPaymentLayout.setVerticalGroup(
                totalPaymentLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(totalPaymentLayout.createSequentialGroup()
                                .addGap(14, 14, 14)
                                .addGroup(totalPaymentLayout
                                        .createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                        .addComponent(jLabel6)
                                        .addComponent(jLabel5))
                                .addContainerGap(14, Short.MAX_VALUE)));

        jButton2.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
        jButton2.setText("In");
        jButton2.setPreferredSize(new java.awt.Dimension(100, 70));
        boxBtn.add(jButton2);

        jButton3.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
        jButton3.setText("Lưu");
        jButton3.setPreferredSize(new java.awt.Dimension(100, 70));
        boxBtn.add(jButton3);

        jButton4.setFont(new java.awt.Font("Arial", 0, 20)); // NOI18N
        jButton4.setText("Thanh toán");
        jButton4.setPreferredSize(new java.awt.Dimension(150, 70));
        boxBtn.add(jButton4);

        CartContainer.setHorizontalScrollBarPolicy(javax.swing.ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        CartContainer.setFocusable(false);
        CartContainer.setMaximumSize(new java.awt.Dimension(420, 32767));
        CartContainer.setMinimumSize(new java.awt.Dimension(420, 601));
        CartContainer.setName(""); // NOI18N
        CartContainer.setWheelScrollingEnabled(false);

        CartContent.setMaximumSize(new java.awt.Dimension(428, 600));
        CartContent.setMinimumSize(new java.awt.Dimension(428, 600));
        CartContent.setName(""); // NOI18N
        CartContent.setPreferredSize(new java.awt.Dimension(428, 600));
        CartContent.setLayout(new java.awt.FlowLayout(java.awt.FlowLayout.LEFT, 3, 5));

        CartContainer.setViewportView(CartContent);

        javax.swing.GroupLayout BuyProductRightLayout = new javax.swing.GroupLayout(BuyProductRight);
        BuyProductRight.setLayout(BuyProductRightLayout);
        BuyProductRightLayout.setHorizontalGroup(
                BuyProductRightLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(totalPayment, javax.swing.GroupLayout.Alignment.TRAILING,
                                javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE,
                                Short.MAX_VALUE)
                        .addComponent(boxBtn, javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(CartContainer, javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));
        BuyProductRightLayout.setVerticalGroup(
                BuyProductRightLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(BuyProductRightLayout.createSequentialGroup()
                                .addComponent(CartContainer, javax.swing.GroupLayout.PREFERRED_SIZE, 601,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(totalPayment, javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(boxBtn, javax.swing.GroupLayout.DEFAULT_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addComponent(BuyProductLeft, javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(BuyProductRight, javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)));
        layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addGroup(layout.createSequentialGroup()
                                .addComponent(BuyProductLeft, javax.swing.GroupLayout.PREFERRED_SIZE,
                                        javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(0, 0, Short.MAX_VALUE))
                        .addComponent(BuyProductRight, javax.swing.GroupLayout.DEFAULT_SIZE,
                                javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));
    }

    private void componentItemCart(CartDTO cart) {
        if (cart != null) {

            // Tạo một JPanel mới để hiển thị thông tin sản phẩm
            JPanel jPanel34 = new JPanel();
            jPanel34.setBackground(new java.awt.Color(255, 255, 255));
            jPanel34.setPreferredSize(new java.awt.Dimension(420, 80));

            JLabel jLabel1 = new JLabel();
            JLabel jLabel2 = new JLabel();
            JSpinner boxQuantity = new JSpinner(
                    new SpinnerNumberModel(cart.getQuantity(), 0, Integer.MAX_VALUE, 1));
            JButton btnRemove = new JButton();

            jLabel1.setFont(new java.awt.Font("Arial", 0, 16));
            jLabel1.setText(cart.getProduct().getProduct_name());

            jLabel2.setFont(new java.awt.Font("Arial", 0, 16));
            jLabel2.setText(String.valueOf(cart.getProduct().getPrice()));

            boxQuantity.setFont(new java.awt.Font("Arial", 1, 14));
            // jTextField2.setHorizontalAlignment(javax.swing.JTextField.CENTER);
            // jTextField2.setText();

            btnRemove.setText("Xoá");

            // Thiết lập GroupLayout cho jPanel34
            javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel34);
            jPanel34.setLayout(jPanel3Layout);
            jPanel3Layout.setHorizontalGroup(
                    jPanel3Layout.createParallelGroup(
                            javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addGap(14, 14, 14)
                                    .addGroup(jPanel3Layout
                                            .createParallelGroup(
                                                    javax.swing.GroupLayout.Alignment.LEADING,
                                                    false)
                                            .addComponent(jLabel2,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    Short.MAX_VALUE)
                                            .addComponent(jLabel1,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    165,
                                                    Short.MAX_VALUE))
                                    .addGap(54, 54, 54)
                                    .addComponent(boxQuantity,
                                            javax.swing.GroupLayout.PREFERRED_SIZE,
                                            54,
                                            javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(
                                            javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                            42,
                                            Short.MAX_VALUE)
                                    .addComponent(btnRemove)
                                    .addGap(19, 19, 19)));
            jPanel3Layout.setVerticalGroup(
                    jPanel3Layout.createParallelGroup(
                            javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addContainerGap(
                                            javax.swing.GroupLayout.DEFAULT_SIZE,
                                            Short.MAX_VALUE)
                                    .addComponent(jLabel1,
                                            javax.swing.GroupLayout.PREFERRED_SIZE,
                                            31,
                                            javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(
                                            javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(jLabel2,
                                            javax.swing.GroupLayout.PREFERRED_SIZE,
                                            30,
                                            javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(16, 16, 16))
                            .addGroup(jPanel3Layout.createSequentialGroup()
                                    .addGap(20, 20, 20)
                                    .addGroup(jPanel3Layout
                                            .createParallelGroup(
                                                    javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(boxQuantity,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                    45,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(btnRemove,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                    45,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addContainerGap(
                                            javax.swing.GroupLayout.DEFAULT_SIZE,
                                            Short.MAX_VALUE)));

            // Thêm jPanel34 vào ItemProduct
            CartContent.add(jPanel34);

            // tăng giảm số lượng giỏ hàng
            boxQuantity.addChangeListener(new ChangeListener() {
                public void stateChanged(ChangeEvent e) {
                    int newValue = (int) boxQuantity.getValue();
                    CartDAO.updateQuantityInCart(cart.getId(), newValue);
                    updateTotalMoney();
                }

            });

            btnRemove.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    int choice = JOptionPane.showConfirmDialog(null, "bạn muốn xoá?", "Comfirm",
                            JOptionPane.YES_NO_OPTION);
                    if (choice == JOptionPane.YES_OPTION) {
                        CartDAO.removeItemInCart(cart.getId());
                        // Tìm chỉ số của jPanel34 trong CartContent
                        int index = CartContent.getComponentZOrder(jPanel34);

                        CartContent.remove(index);
                        updateTotalMoney();
                        // Cập nhật giao diện
                        CartContent.revalidate();
                        CartContent.repaint();
                    }
                }
            });

        }

    }

    // Code for dispatching events from components to event handlers
    public static void updateTotalMoney() {
        ArrayList<CartDTO> list_cart = CartDAO.getCartByAccountId(1);

        float totalPayment = 0;

        for (CartDTO cart : list_cart) {
            totalPayment += cart.getQuantity() * cart.getProduct().getPrice();
        }

        jLabel6.setText(String.valueOf(totalPayment));
    }

    // Variables declaration - do not modify
    private javax.swing.JPanel BuyProductLeft;
    private javax.swing.JPanel BuyProductRight;
    private javax.swing.JScrollPane CartContainer;
    private javax.swing.JPanel CartContent;
    private javax.swing.JPanel CoffeeContent;
    private javax.swing.JButton ImageBtn1;
    private javax.swing.JButton ImageBtn2;
    private javax.swing.JPanel Item1;
    private javax.swing.JPanel Item10;
    private javax.swing.JPanel Item2;
    private javax.swing.JPanel Item3;
    private javax.swing.JPanel Item4;
    private javax.swing.JPanel Item5;
    private javax.swing.JPanel Item6;
    private javax.swing.JPanel Item7;
    private javax.swing.JPanel Item8;
    private javax.swing.JPanel Item9;
    private javax.swing.JPanel ItemCart;
    private javax.swing.JPanel MilkTeaContent1;
    private javax.swing.JPanel boxBtn;
    private javax.swing.JButton btnItem;
    private javax.swing.JButton btnItem1;
    private javax.swing.JButton jButton11;
    private javax.swing.JButton jButton12;
    private javax.swing.JButton jButton13;
    private javax.swing.JButton jButton14;
    private javax.swing.JButton jButton15;
    private javax.swing.JButton jButton16;
    private javax.swing.JButton jButton17;
    private javax.swing.JButton jButton18;
    private javax.swing.JButton jButton19;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton20;
    private javax.swing.JButton jButton21;
    private javax.swing.JButton jButton22;
    private javax.swing.JButton jButton23;
    private javax.swing.JButton jButton24;
    private javax.swing.JButton jButton25;
    private javax.swing.JButton jButton26;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JEditorPane jEditorPane1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel18;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel5;
    private static javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JLabel nameItem;
    private javax.swing.JLabel nameItem1;
    private javax.swing.JLabel nameProduct;
    private javax.swing.JLabel price;
    private javax.swing.JLabel priceItem;
    private javax.swing.JLabel priceItem1;
    private javax.swing.JSpinner quantity;
    private javax.swing.JButton remove;
    private javax.swing.JPanel totalPayment;
    // End of variables declaration
}
